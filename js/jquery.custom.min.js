(function(e){e.fn.extend({customSelect:function(t){if(typeof document.body.style.maxHeight==="undefined"){return this}var n={customClass:"customSelect",mapClass:true,mapStyle:true},t=e.extend(n,t),r=t.customClass,i=function(t,n){var r=t.find(":selected"),i=n.children(":first"),o=r.html()||"&nbsp;";i.html(o);if(r.attr("disabled")){n.addClass(s("DisabledOption"))}else{n.removeClass(s("DisabledOption"))}setTimeout(function(){n.removeClass(s("Open"));e(document).off("mouseup."+s("Open"))},60)},s=function(e){return r+e};return this.each(function(){var n=e(this),o=e("<span />").addClass(s("Inner")),u=e("<span />");n.after(u.append(o));u.addClass(r);if(t.mapClass){u.addClass(n.attr("class"))}if(t.mapStyle){u.attr("style",n.attr("style"))}n.addClass("hasCustomSelect").on("update",function(){i(n,u);var e=parseInt(n.outerWidth(),10)-(parseInt(u.outerWidth(),10)-parseInt(u.width(),10));u.css({display:"inline-block"});var t=u.outerHeight();if(n.attr("disabled")){u.addClass(s("Disabled"))}else{u.removeClass(s("Disabled"))}o.css({width:e,display:"inline-block"});n.css({"-webkit-appearance":"menulist-button",width:u.outerWidth(),position:"absolute",opacity:0,height:t,fontSize:u.css("font-size")})}).on("change",function(){u.addClass(s("Changed"));i(n,u)}).on("keyup",function(e){if(!u.hasClass(s("Open"))){n.blur();n.focus()}else{if(e.which==13||e.which==27){i(n,u)}}}).on("mousedown",function(e){u.removeClass(s("Changed"))}).on("mouseup",function(t){if(!u.hasClass(s("Open"))){if(e("."+s("Open")).not(u).length>0&&typeof InstallTrigger!=="undefined"){n.focus()}else{u.addClass(s("Open"));t.stopPropagation();e(document).one("mouseup."+s("Open"),function(t){if(t.target!=n.get(0)&&e.inArray(t.target,n.find("*").get())<0){n.blur()}else{i(n,u)}})}}}).focus(function(){u.removeClass(s("Changed")).addClass(s("Focus"))}).blur(function(){u.removeClass(s("Focus")+" "+s("Open"))}).click(function(){i(n,u)}).hover(function(){u.addClass(s("Hover"))},function(){u.removeClass(s("Hover"))}).trigger("update")})}})})(jQuery)